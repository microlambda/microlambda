"use strict";(self.webpackChunkmila_docs=self.webpackChunkmila_docs||[]).push([[610],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>p});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=l(n),p=o,y=m["".concat(c,".").concat(p)]||m[p]||d[p]||a;return n?r.createElement(y,i(i({ref:t},u),{},{components:n})):r.createElement(y,i({ref:t},u))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9044:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:3},i="Using custom domains",s={unversionedId:"deployments/using-custom-domains",id:"deployments/using-custom-domains",title:"Using custom domains",description:"Microlambda makes it very easy to use custom API Gateway domains.",source:"@site/docs/2-deployments/3-using-custom-domains.md",sourceDirName:"2-deployments",slug:"/deployments/using-custom-domains",permalink:"/docs/deployments/using-custom-domains",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Manage environments",permalink:"/docs/deployments/manage-environments"},next:{title:"Using layers",permalink:"/docs/deployments/using-layers"}},c={},l=[],u={toc:l};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"using-custom-domains"},"Using custom domains"),(0,o.kt)("p",null,"Microlambda makes it very easy to use custom API Gateway domains."),(0,o.kt)("p",null,"The benefit is first aesthetic, allowing you to serve the API on a more elegant domain than the one generated by default by AWS.\nBut more importantly, it enables the activation of advanced and highly interesting Route 53 features such as latency-based routing."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"To enable a custom domain, you need to have a hosted zone covering the domain in your AWS account.\nIf you don't have one, you must create it beforehand and update the NS records with your registrar.")),(0,o.kt)("p",null,"To serve API Gateway on a custom domain, simply add the following configuration to your serverless.yml:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"custom:\n    domain:\n      domainName: ${env:ENV}.api.myapp.io\n")),(0,o.kt)("p",null,"The Microlambda plugin will take care of finding the nearest hosted zone for the domain.\nIt will also find the closest certificate covering the domain, and if one doesn't exist in the subscription,\nit will be provisioned and activated via the DNS method. Afterward, the plugin will create both DNS records on Route53\nand update the configuration on API Gateway."),(0,o.kt)("p",null,"If the infrastructure is replicated in multiple regions, the created records will enable latency-based routing, directing\ntraffic to the AWS region with the lowest latency for the end user. You can learn more about this feature by reading the\n",(0,o.kt)("a",{parentName:"p",href:"../advanced/infrastructure-replication"},"dedicated section"),"."))}d.isMDXComponent=!0}}]);